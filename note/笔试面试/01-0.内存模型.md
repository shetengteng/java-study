# CPU多核架构

![](img/x58.png)



# JMM

![](img/x55.png)

- JMM与硬件内存架构的关系

![1581856521064](img/x56.png)



![](img/x57.png)



# Volatile

- 运行时查看汇编指令

![](img/x59.png) 

- 手动增加内存屏障达到和使用volatile相同的效果

<img src="img/x60.png" style="zoom:80%;" /> 

- 查看hotspot的源码
  - 在openjdk中

![](img/x61.png) 

![](img/x62.png) 

- lock 和 synchronized区别

![](img/x63.png) 

